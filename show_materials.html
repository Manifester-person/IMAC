<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Material Details with Stock Alerts</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
<style>
  body {
    font-family: 'Poppins', sans-serif;
    background: #f7f9fc;
    color: #333;
    margin: 0;
    padding: 2rem;
    min-height: 100vh;
  }
  h2 {
    text-align: center;
    font-weight: 700;
    margin-bottom: 2rem;
    color: #222;
  }
  table {
    margin: 0 auto;
    width: 95%;
    max-width: 1200px;
    border-collapse: separate;
    border-spacing: 0 10px;
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
  }
  thead th {
    background-color: #343a40;
    color: #fff;
    padding: 12px 15px;
    border-radius: 8px;
    font-weight: 600;
  }
  tbody tr {
    background-color: #fff;
    border-radius: 8px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.05);
  }
  tbody tr + tr {
    margin-top: 10px;
  }
  tbody td {
    padding: 15px 15px;
    vertical-align: middle;
    color: #444;
  }
  /* Alert colors */
  .alert-red {
    background-color: #f8d7da !important;
    color: #721c24 !important;
    font-weight: 700;
  }
  .alert-yellow {
    background-color: #fff3cd !important;
    color: #856404 !important;
    font-weight: 700;
  }
  .alert-green {
    color: #155724 !important;
    font-weight: 700;
  }
  /* Round corners fix for first and last td */
  tbody tr td:first-child {
    border-top-left-radius: 8px;
    border-bottom-left-radius: 8px;
  }
  tbody tr td:last-child {
    border-top-right-radius: 8px;
    border-bottom-right-radius: 8px;
  }
  a.button {
    display: block;
    width: 220px;
    margin: 2rem auto 0;
    padding: 14px 0;
    background-color: #007bff;
    color: white;
    font-weight: 600;
    text-align: center;
    text-decoration: none;
    border-radius: 30px;
    box-shadow: 0 7px 20px rgba(0,123,255,0.4);
    transition: background-color 0.3s ease, box-shadow 0.3s ease;
  }
  a.button:hover {
    background-color: #0056b3;
    box-shadow: 0 10px 30px rgba(0,86,179,0.6);
  }
  .button-link {
    background-color: #7b5fff;
    color: white;
    padding: 6px 12px;
    border-radius: 5px;
    text-decoration: none;
    font-weight: 600;
    transition: background-color 0.3s ease;
  }
  .button-link:hover {
    background-color: #925cff;
  }
  @media (max-width: 768px) {
    table {
      width: 100%;
    }
    tbody td, thead th {
      padding: 12px 8px;
    }
  }
</style>
</head>
<body>

  <h2>Material Details with Stock Alerts</h2>

  <table role="table" aria-label="Material inventory table">
    <thead>
  <tr>
    <th scope="col">Material Code</th>
    <th scope="col">Name</th>
    <th scope="col">Vendor</th>
    <th scope="col">Category</th>
    <th scope="col">Unit</th>
    <th scope="col">Min Stock</th>
    <th scope="col">Current Stock</th>
    <th scope="col">Reorder Qty</th>
    <th scope="col">Location</th>
    <th scope="col">Purchase History</th>
    <th scope="col">Tax (%)</th>
    <th scope="col">Rate 2</th>
    <th scope="col">Actions</th>
  </tr>
</thead>
<tbody>
  {% for material, alert in materials %}
  <tr>
    <td>{{ material.material_code }}</td>
    <td>{{ material.material_name }}</td>
    <td>{{ material.vendor }}</td>
    <td>{{ material.item_category }}</td>
    <td>{{ material.unit_of_measurement }}</td>
    <td>{{ material.minimum_stock_level }}</td>
    <td class="{% if alert=='red' %}alert-red{% elif alert=='yellow' %}alert-yellow{% else %}alert-green{% endif %}">
      {{ material.current_stock }}
    </td>
    <td>{{ material.reorder_quantity }}</td>
    <td>{{ material.location or 'N/A' }}</td>
    <td>{{ material.purchase_history }}</td>
    <td>{{ material.tax }}</td>
    <td>{{ material.rate2 }}</td>
    <td>
      <div style="display: flex; flex-direction: column; gap: 6px; align-items: center;">
        <a href="{{ url_for('update_material', id=material.id) }}" class="button-link" aria-label="Update stock of {{ material.material_name }}">
          Update
        </a>
        <a href="{{ url_for('modify_material', material_id=material.id) }}" class="button-link">
          Modify
        </a>
      </div>
    </td>
    <td>
      <form action="{{ url_for('delete_material', id=material.id) }}" method="POST" onsubmit="return confirm('Are you sure you want to delete this material?');">
        <button type="submit" class="btn btn-sm btn-danger">Delete</button>
      </form>
    </td>
  </tr>
  {% else %}
  <tr>
    <td colspan="14" style="text-align:center; color:#666;">No materials found.</td>
  </tr>
  {% endfor %}
</tbody>

  </table>

  <a href="{{ url_for('dashboard') }}" class="button" role="button">Back to Dashboard</a>

</body>
</html>
